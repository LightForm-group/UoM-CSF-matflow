name: import_example_simple
archive: dropbox # TEMP
run_options:
  l: short

import:
  - parameter: volume_element
    from:
      # (specify either the full path to HDF5 file, or the parent directory:)
      workflow: /mnt/eps01-rds/jf01-home01/shared/matflow/workflows/completed_workflows/generate_RVE_2021-04-13-100535
      # --- Additional options ---
      # context:        # (string) optionally specify which context this comes from in the source workflow
      # iteration:      # (int) optionally specify which iteration to use (default is final iteration, -1) in the source workflow
      # elements:       # (list of int) optionally specify which subset of elements to use (default is all elements) in the source workflow
    # as:               # (string) optionally rename the parameter for use in this workflow
    # context:          # (string) optionally use a different context for the parameter in this workflow

tasks:

  - name: generate_load_case
    method: uniaxial
    software: formable
    base:
      total_times: [100]
      num_increments: [200]
      target_strain_rates: [1.0e-3]
      directions: [x]

  - name: simulate_volume_element_loading
    method: CP_FFT
    software: DAMASK
    run_options:
      num_cores: 4
      l: short
    output_map_options:
      operations:
        - name: add_Cauchy
          args: {P: P, F: F}
          opts: {add_Mises: true}
        - name: add_strain_tensor
          args: {F: F, t: V, m: 0}
          opts: {add_Mises: true}          
        - name: add_strain_tensor
          args: {F: Fp, t: V, m: 0}
          opts: {add_Mises: true}
      incremental_data:
        - name: vol_avg_equivalent_stress
          path: constituent/1_Al/generic/sigma_vM
          transforms: [mean_along_axes: 1]
        - name: vol_avg_equivalent_strain
          path: constituent/1_Al/generic/epsilon_V^0(F)_vM
          transforms: [mean_along_axes: 1]
        - name: vol_avg_equivalent_plastic_strain
          path: constituent/1_Al/generic/epsilon_V^0(Fp)_vM
          transforms: [mean_along_axes: 1]
          increments: 10 # E.g. extract data every 10th increment.
    base:
      homogenization_schemes:
        SX:
          mech:
            type: none
      phases:
        Al:
          elasticity:
            type: hooke
            C_11: 106.75e9
            C_12: 60.41e9
            C_44: 28.34e9            
          generic:
            output: [F, P, Fp]
          lattice: fcc
          plasticity:
            N_sl: [12]
            a_sl: 2.25
            atol_xi: 1.0
            dot_gamma_0_sl: 0.001
            h_0_sl_sl: 75e6
            h_sl_sl: [1, 1, 1.4, 1.4, 1.4, 1.4]
            n_sl: 20
            output: [xi_sl]
            xi_0_sl: [31e6]
            xi_inf_sl: [63e6]
            type: phenopowerlaw
