name: tension_DAMASK_Mg

# archive: dropbox
run_options:
  l: short

tasks:

  - name: generate_microstructure_seeds
    method: random
    software: damask
    base:
      size: [1, 1, 1]
      num_grains: 3
    output_map_options:
      phase_label: Mg

  - name: generate_volume_element
    method: random_voronoi
    software: damask
    base:
      grid_size: [4, 4, 4]
      homog_label: SX

  - name: visualise_volume_element
    method: VTK
    software: damask

  - name: generate_load_case
    method: uniaxial
    software: formable
    base:
      total_times: [100]
      num_increments: [200]
      target_strain_rates: [1.0e-3]
      directions: [x]

  - name: simulate_volume_element_loading
    method: CP_FFT
    software: DAMASK
    run_options:
      num_cores: 4
      l: short
    output_map_options:
      operations:
        - name: add_Cauchy
          args: {P: P, F: F}
          opts: {add_Mises: true}
        - name: add_strain_tensor
          args: {F: F, t: V, m: 0}
          opts: {add_Mises: true}          
        - name: add_strain_tensor
          args: {F: Fp, t: V, m: 0}
          opts: {add_Mises: true}
      incremental_data:
        - name: vol_avg_equivalent_stress
          path: constituent/1_Mg/generic/sigma_vM
          transforms: [mean_along_axes: 1]
        - name: vol_avg_equivalent_strain
          path: constituent/1_Mg/generic/epsilon_V^0(F)_vM
          transforms: [mean_along_axes: 1]
        - name: vol_avg_equivalent_plastic_strain
          path: constituent/1_Mg/generic/epsilon_V^0(Fp)_vM
          transforms: [mean_along_axes: 1]
          increments: 10 # E.g. extract data every 10th increment.
      visualise:
        increments: [0, -1] # Generate a VTK file for the initial and final increments
        labels: ['F', 'P', 'sigma_vM']          
    base:
      homogenization_schemes:
        SX:
          mech:
            type: none
      phases:
        Mg:
          generic:
            output:
              - F                 # deformation gradient (total)
              - P                 # stress (piola-kirchoff)
              - Fp                # deformation gradient (plastic part)
              - O                 # orientations (as quaternions)
          lattice: hex
          c/a: 1.6235
          elasticity:
            type: hooke
            C_11: 59300000000.0
            C_12: 25700000000.0
            C_13: 21400000000.0
            C_33: 61500000000.0
            C_44: 16400000000.0
          plasticity:            
            type: phenopowerlaw            
            output:
              - gamma_sl          # slip volume fraction
              - gamma_tw          # twinning volume fraction
              - xi_sl             # slip resistance
              - xi_tw             # twinning resistance            
            N_sl:     # Number of slip systems to include
              - 3                 # basal
              - 3                 # prism 
              - 0                 # prism
              - 0                 # pyr(a)
              - 0                 # pyr(c+a)
              - 0                 # pyr(c+a)            
            xi_0_sl:    # Initial slip CRSSs  
              - 17000000.0        # basal      
              - 77000000.0        # prism 
              - 0.0               # prism
              - 0.0               # pyr(a)
              - 0.0               # pyr(c+a)
              - 0.0               # pyr(c+a)            
            xi_inf_sl: # Final slip CRSSs (same as initial = no hardening)
              - 17000000.0        # basal   
              - 77000000.0        # prism 
              - 0.0               # prism
              - 0.0               # pyr(a)
              - 0.0               # pyr(c+a)
              - 0.0               # pyr(c+a)
            N_tw:     # Number of twin systems to include
              - 6                 # T1
              - 0                 # C1
              - 0                 # T2    
              - 0                 # C2
            xi_0_tw:  # Intial twin CRSSs
              - 33000000.0        # T1
              - 0.0               # C1
              - 0.0               # T2 
              - 0                 # C2
            a_sl: 2.25
            atol_xi: 1.0
            dot_gamma_0_sl: 0.001
            h_0_sl_sl: 500000000.0
            h_sl_sl:
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
            n_sl: 20
            dot_gamma_0_tw: 0.001
            c_1: 0.0
            c_2: 0.0
            c_3: 20.0
            c_4: 20.0
            f_sl_sat_tw: 10.0
            h_0_tw_tw: 50000000.0
            h_0_tw_sl: 150000000.0
            h_tw_tw:
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
            h_sl_tw:
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
            h_tw_sl:
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
              - 1
            n_tw: 20
